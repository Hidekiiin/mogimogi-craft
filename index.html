<!DOCTYPE html>
<html>
<head>
  <title>ã‚‚ãã‚‚ãã‚¯ãƒ©ãƒ•ãƒˆ</title>
  <style>
    body {
      margin: 0;
      background-color: #87ceeb;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
    #fruit-count, #tool-info {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(255, 255, 255, 0.8);
      padding: 5px 10px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div id="fruit-count">ğŸ ãƒ•ãƒ«ãƒ¼ãƒ„: 0</div>
  <div id="tool-info">ğŸ”¨ ãƒ„ãƒ¼ãƒ«: æ‰‹</div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // ã‚²ãƒ¼ãƒ å¤‰æ•°
    let fruits = [];
    let inventory = { fruit: 0, wood: 0, stone: 0 };
    let selectedTool = 'hand';

    // æœ¨ã¨çŸ³ã®ä½ç½®
    let trees = [{ x: 200, y: 300 }, { x: 600, y: 400 }];
    let rocks = [{ x: 400, y: 500 }];

    // ãƒ•ãƒ«ãƒ¼ãƒ„ã‚¯ãƒ©ã‚¹
    class Fruit {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.radius = 20;
        this.isFalling = false;
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = 'red';
        ctx.fill();
        ctx.closePath();
      }

      fall() {
        if (this.isFalling) {
          this.y += 5;
          if (this.y > canvas.height - 30) {
            this.isFalling = false;
          }
        }
      }
    }

    // æœ¨ã‚’æç”»
    function drawTrees() {
      ctx.fillStyle = 'green';
      trees.forEach(tree => {
        ctx.fillRect(tree.x - 25, tree.y - 50, 50, 100);
      });
    }

    // çŸ³ã‚’æç”»
    function drawRocks() {
      ctx.fillStyle = 'gray';
      rocks.forEach(rock => {
        ctx.beginPath();
        ctx.arc(rock.x, rock.y, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.closePath();
      });
    }

    // ã‚¢ã‚¤ãƒ†ãƒ å–å¾—å‡¦ç†
    function collectFruit(fruit) {
      inventory.fruit++;
      document.getElementById('fruit-count').innerText = `ğŸ ãƒ•ãƒ«ãƒ¼ãƒ„: ${inventory.fruit}`;
    }

    // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
    canvas.addEventListener('mousedown', (e) => {
      const mouseX = e.clientX;
      const mouseY = e.clientY;

      // ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’ã‚¿ãƒƒãƒ—ã§å–å¾—
      fruits.forEach((fruit, index) => {
        const dist = Math.hypot(mouseX - fruit.x, mouseY - fruit.y);
        if (dist < fruit.radius) {
          fruits.splice(index, 1);
          collectFruit(fruit);
        }
      });

      // æœ¨ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ãƒ•ãƒ«ãƒ¼ãƒ„ç”Ÿæˆ
      trees.forEach(tree => {
        if (
          mouseX > tree.x - 25 &&
          mouseX < tree.x + 25 &&
          mouseY > tree.y - 50 &&
          mouseY < tree.y + 50
        ) {
          const newFruit = new Fruit(tree.x, tree.y + 50);
          newFruit.isFalling = true;
          fruits.push(newFruit);
        }
      });

      // æœ¨æã€çŸ³ã®åé›†
      if (selectedTool === 'axe') {
        trees.forEach((tree, index) => {
          if (
            mouseX > tree.x - 25 &&
            mouseX < tree.x + 25 &&
            mouseY > tree.y - 50 &&
            mouseY < tree.y + 50
          ) {
            inventory.wood++;
            trees.splice(index, 1);
            alert('ğŸŒ³ æœ¨æã‚’å–å¾—ã—ã¾ã—ãŸï¼');
          }
        });
      } else if (selectedTool === 'hammer') {
        rocks.forEach((rock, index) => {
          const dist = Math.hypot(mouseX - rock.x, mouseY - rock.y);
          if (dist < 30) {
            inventory.stone++;
            rocks.splice(index, 1);
            alert('ğŸª¨ çŸ³ã‚’å–å¾—ã—ã¾ã—ãŸï¼');
          }
        });
      }
    });

    // ãƒ„ãƒ¼ãƒ«å¤‰æ›´
    document.addEventListener('keydown', (e) => {
      if (e.key === '1') {
        selectedTool = 'hand';
        document.getElementById('tool-info').innerText = 'ğŸ”¨ ãƒ„ãƒ¼ãƒ«: æ‰‹';
      } else if (e.key === '2') {
        selectedTool = 'axe';
        document.getElementById('tool-info').innerText = 'ğŸª“ ãƒ„ãƒ¼ãƒ«: æ–§';
      } else if (e.key === '3') {
        selectedTool = 'hammer';
        document.getElementById('tool-info').innerText = 'ğŸ”¨ ãƒ„ãƒ¼ãƒ«: ãƒãƒ³ãƒãƒ¼';
      }
    });

    // ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawTrees();
      drawRocks();

      // ãƒ•ãƒ«ãƒ¼ãƒ„æç”»ã¨è½ä¸‹å‡¦ç†
      fruits.forEach(fruit => {
        fruit.draw();
        fruit.fall();
      });

      requestAnimationFrame(gameLoop);
    }

    // ã‚²ãƒ¼ãƒ é–‹å§‹
    gameLoop();
  </script>
</body>
</html>
